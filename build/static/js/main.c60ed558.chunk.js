(this["webpackJsonpuse-amazon"]=this["webpackJsonpuse-amazon"]||[]).push([[0],{38:function(e){e.exports=JSON.parse('{"inputStream":{"type":"LiveStream","constraints":{"width":{"min":450},"height":{"min":300},"facingMode":"environment","aspectRatio":{"min":1,"max":2}}},"locator":{"patchSize":"medium","halfSample":true},"numOfWorkers":2,"frequency":10,"decoder":{"readers":["ean_reader"]},"locate":true}')},43:function(e,t,n){e.exports=n(52)},48:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var r=n(22),c=n(4),o=n(1),i=n.n(o),a=n(29),u=n.n(a);n(48),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=n(38),l=n(49);function f(e){var t=e.onStarted,n=e.onDetected,r=Object(o.useRef)((function(e){return t(e)})),c=Object(o.useRef)((function(e){return n(e)}));Object(o.useEffect)((function(){return l.init(s,(function(e){if(e)return console.log(e,"error msg");r.current(!0),l.start(),console.log("\t\t__Scanner Start__")})),function(){l.stop(),r.current(!1),console.log("\t\t~~Scanner Stop~~")}}),[]),Object(o.useEffect)((function(){var e=function(e){var t=e.box,n=e.drawingCtx,r=e.color,c=void 0===r?"green":r,o=e.lineWidth,i=void 0===o?2:o;l.ImageDebug.drawPath(t,{x:0,y:1},n,{color:c,lineWidth:i})};l.onProcessed((function(t){var n=l.canvas.ctx.overlay,r=l.canvas.dom.overlay;t&&(t.boxes&&(n.clearRect(0,0,Number(r.getAttribute("width")),Number(r.getAttribute("height"))),t.boxes.filter((function(e){return e!==t.box})).forEach((function(t){return e({box:t,drawingCtx:n})}))),t.box&&e({box:t.box,drawingCtx:n,color:"#00F"}),t.codeResult&&t.codeResult.code&&(l.ImageDebug.drawPath(t.line,{x:"x",y:"y"},n,{color:"red",lineWidth:3}),l.onDetected((function(e){return c.current(e.codeResult.code)}))))}))}),[]);Object(o.useMemo)((function(){return{position:"absolute",top:0,left:0,width:"100%;",height:"100%",borderRadius:"10px 10px 0px"}}),[]);return i.a.createElement("div",{id:"interactive",className:"viewport",style:{width:"100%",height:"100%",top:0,bottom:0}})}var b=n(13),d=n(8),m=n(20);function h(e){var t=e.children,n=e.height,r=void 0===n?100:n,a=e.started,u=void 0!==a&&a,s=e.onOpen,l=void 0===s?null:s,f=e.onClose,h=void 0===f?null:f,g=Object(d.useSpring)((function(){return{y:r}})),v=Object(c.a)(g,2),O=v[0].y,j=v[1],p=Object(o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return l&&(l(),j({y:0,config:e?d.config.wobbly:d.config.stiff}))}),[l,j]),w=Object(o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return h&&(h(),j({y:r,config:Object(b.a)(Object(b.a)({},d.config.stiff),{},{velocity:e})}))}),[r,h,j]),x=Object(m.a)((function(e){var t=e.last,n=Object(c.a)(e.vxvy,2)[1],o=Object(c.a)(e.movement,2),i=o[0],a=o[1],u=e.cancel;if(a<-r/3&&u&&u(),t)return(a>.5*r||n>2.5)&&-100<i&&i<100?w(n):p(n>0);j({y:a,immediate:!1,config:d.config.stiff})}),{initial:function(){return[0,O.get()]},filterTaps:!0,bounds:{top:0},rubberband:!0}),y=Object(o.useRef)((function(e){return e?p():w()}));Object(o.useEffect)((function(){y.current(u)}),[u]);var E=Object(o.useMemo)((function(){var e="calc(-100vh + ".concat(r-100,"px)"),t=O.to((function(e){return e<r}))?"block":"none";return{bottom:e,y:O,left:"2vw",width:"96vw",height:"calc(100vh + 100px)",display:t,position:"fixed",borderRadius:"4em 4em 0px",zIndex:100,backgroundColor:"rgba(0,0,0,0)",touchAction:"none"}}),[r,O]);return i.a.createElement(d.animated.div,Object.assign({className:"sheet"},x(),{style:E}),t)}function g(e){var t=e.children,n=e.width,r=void 0===n?600:n,a=e.visible,u=void 0===a?4:a,s=e.style,l=void 0===s?{}:s,f=Object(o.useMemo)((function(){return t.length>u?t.length:u}),[t,u]),h=Object(o.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return(e<0?e+t:e)%t}),[t]),g=Object(o.useCallback)((function(e,t,n){return h(e-t+n)}),[h]),v=Object(d.useSprings)(f,(function(e){return{x:(e<f-1?e:-1)*r}})),O=Object(c.a)(v,2),j=O[0],p=O[1],w=Object(o.useRef)([0,1]),x=Object(o.useRef)(0),y=Object(o.useRef)(0),E=Object(o.useCallback)((function(e,t){var n=h(Math.floor(e/r)%f),c=t<0?f-u:1;p((function(o){var i=g(o,n,c),a=g(o,w.current[0],w.current[1]),u=t>0?i:f-i-1;return{x:-e%(r*f)+r*(n-(e<0?f:0)+i-c),immediate:t<0?a>i:a<i,config:{tension:100*(1+f-u),friction:30+40*u}}})),w.current=[n,c]}),[h,g,r,u,p,f]),k=Object(m.b)({onDrag:function(e){var t=Object(c.a)(e.offset,1)[0],n=Object(c.a)(e.vxvy,1)[0];return n&&(y.current=-t,E(x.current-t,-n))},onWheel:function(e){var t=Object(c.a)(e.offset,2)[1],n=Object(c.a)(e.vxvy,2)[1];return n&&(x.current=t,E(y.current+t,n))}});return i.a.createElement("div",Object.assign({},k(),{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"100%"}}),j.map((function(e,n){var r=e.x;return i.a.createElement(d.animated.div,{key:n,style:Object(b.a)({position:"absolute",x:r,willChange:"transform"},l)},t[n])})))}function v(e){var t=e.url,n=void 0===t?"":t,r=e.limit,a=void 0===r?400:r,u=e.style,s=void 0===u?{}:u,l=e.onOpen,f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.size,r=void 0===n?"LZZZZZZZ":n,i=t.isssl,a=void 0!==i&&i,u=t.searches,s=void 0===u?10:u,l=Object(o.useMemo)((function(){return"".concat(a?"images-na.ssl-images-":"images-jp.","amazon.com")}),[a]),f=Object(o.useCallback)((function(e){return"http://".concat(l,"/images/P/").concat(e,".09.").concat(r)}),[l,r]),d=Object(o.useRef)([]),m=Object(o.useState)(null),h=Object(c.a)(m,2),g=h[0],v=h[1],O=Object(o.useRef)(new Image),j=Object(o.useRef)(""),p=Object(o.useMemo)((function(){var t,n=new URL("".concat(e.match("https")?"":"https://").concat(e)).pathname.split("/").filter((function(e){return e})),r=n.map((function(e,t){return"dp"===e&&t})).find((function(e){return e}))||0,c=n.find((function(e,t){return t===r+1}))||"",o=r>0?n[0]:"",i=(null===(t=n.find((function(e){return e.match("ref=")})))||void 0===t?void 0:t.split("ref=")[1])||"";return d.current.push(parseInt(c,10)),{name:o,isbn:c,ref:i}}),[e]),w=Object(o.useCallback)((function(){var e=d.current[0],t=d.current.length,n=e+~~((t+1)/2)*(t%2*2-1);if(!(t>s||j.current))return d.current.push(n),v((function(e){return Object(b.a)(Object(b.a)({},e),{},{src:f(n)})}))}),[f,s]);return Object(o.useEffect)((function(){if(!j.current){var e=d.current.slice(-1)[0]||p.isbn,t=f(e),n=p.name||"";v({src:t,alt:n}),O.current.src=t,O.current.onload=function(){var e=O.current.width,t=O.current.height;if(e<2||t<2)return w();j.current=O.current.src}}}),[f,w,p,null===g||void 0===g?void 0:g.src]),{path:p,image:O,img:g}}(n),h=Object(o.useRef)(!1),g=Object(d.useSpring)((function(){return{scale:1,x:0,y:0}})),v=Object(c.a)(g,2),O=v[0],j=O.scale,p=O.x,w=O.y,x=v[1],y=Object(m.b)({onHover:function(e){return x({scale:e.hovering?1.1:1})},onClick:function(e){return l(),e.stopPropagation()},onDrag:function(e){var t=e.down,n=Object(c.a)(e.vxvy,1)[0],r=Object(c.a)(e.movement,2),o=r[0],i=r[1],u=e.cancel;Math.pow(o,2)+Math.pow(i,2)>Math.pow(a,2)&&u&&u();var s=100<Math.floor(o)||2<Math.floor(n)||t||h.current;if(x({x:t?o:0,y:t?i:0,scale:s&&Math.floor(i)<a/2?1.2:.8}),console.log(100<Math.floor(o),2<Math.floor(n),t,h.current),s)return null;h.current=!0,l()}}),E=Object(o.useMemo)((function(){return{div:Object(b.a)({width:"auto",height:"100%",scale:j,x:p,y:w,zIndex:1},s),img:{width:"auto",height:"100%",borderRadius:"1em",pointerEvents:"none"}}}),[s,j,p,w]);return i.a.createElement(d.animated.div,Object.assign({style:E.div},y()),f.img&&i.a.createElement("img",Object.assign({style:E.img},f.img)))}function O(e){var t=e.height,n=e.limit,r=e.opened,a=e.started,u=e.onOpen,s=e.onClose,l=Object(d.useSpring)((function(){return{scale:1,x:0,y:0}})),f=Object(c.a)(l,2),h=f[0],g=h.scale,v=h.x,O=h.y,j=f[1],p=Object(o.useCallback)((function(){return j({scale:1.2,x:-25,y:-25,config:d.config.stiff})}),[j]),w=Object(o.useCallback)((function(){return j({scale:1,x:0,y:100,config:d.config.molasses})}),[j]),x=Object(o.useCallback)((function(){return j({scale:1,x:0,y:0,config:d.config.stiff})}),[j]),y=Object(m.b)({onClick:function(){return r&&a?(s(),x()):(u(),p())},onDrag:function(e){var t=e.down,r=Object(c.a)(e.movement,2),o=r[0],i=r[1],a=e.cancel;Math.pow(o,2)+Math.pow(i,2)>Math.pow(n,2)&&a&&a(),j({x:t?o:0,y:t?i:0,config:d.config.stiff})}}),E=O.to((function(e){return e<t}))?"flex":"none",k=Object(o.useMemo)((function(){return{fontSize:"2em",bottom:"1em",right:"1em",height:"2em",width:"2em",borderRadius:"4em",zIndex:99,position:"fixed",background:"coral",alignItems:"center",justifyContent:"center"}}),[]);return Object(o.useEffect)((function(){a?w():x()}),[a,w,x]),i.a.createElement(d.animated.div,Object.assign({className:"action-btn"},y(),{style:Object(b.a)(Object(b.a)({},k),{},{display:E,scale:g,x:v,y:O})}),"+")}var j=[4041013380,4041002877,4041315220,4041067944,4041366054,4041245257],p=function(){var e=Object(o.useState)([]),t=Object(c.a)(e,2),n=t[0],a=t[1],u=Object(o.useState)(""),s=Object(c.a)(u,2),l=s[0],b=s[1],d=Object(o.useState)([].concat(j).map((function(e){return"amazon.com/dp/".concat(e,"/")}))),m=Object(c.a)(d,2),p=m[0],w=m[1],x=Object(o.useState)(!1),y=Object(c.a)(x,2),E=y[0],k=y[1],C=Object(o.useState)(!1),S=Object(c.a)(C,2),R=S[0],M=S[1],z=Object(o.useRef)(null),I=Object(o.useCallback)((function(e){if(null===z.current&&(10===e.length||13===e.length)){var t=10===e.length?e:e.slice(3);n.filter((function(e){return e.match(t)})).length||(z.current=t,setTimeout((function(){return z.current=null}),2e3),a((function(e){return[].concat(Object(r.a)(e),["amazon.com/dp/".concat(t)])})),console.log("Index add newcode",t))}}),[n]),W=Object(o.useCallback)((function(e){return w((function(t){return[].concat(Object(r.a)(t),[e])}))}),[]);return console.log("Index Render ".concat(E?"":"no ","opened ").concat(R?"":"no "," started")),i.a.createElement(o.Fragment,null,i.a.createElement(O,{onOpen:function(){return!E&&k(!0)},onClose:function(){return E&&k(!1)},height:.96*window.innerHeight,limit:200,opened:E,started:R}),i.a.createElement(h,{onOpen:function(){return!E&&(k(!0),b(""),a([]))},onClose:function(){return E&&k(!1)},height:.96*window.innerHeight,started:R},E&&i.a.createElement(f,{onStarted:M,onDetected:I}),E&&R&&i.a.createElement(g,{width:window.innerWidth/4,visible:6,style:{height:"40%",bottom:"15%",left:0}},n.map((function(e,t){return i.a.createElement(v,{key:t,url:e,onOpen:function(){return E&&(k(!1),W(e))}})})))),i.a.createElement(g,{width:window.innerWidth/3,visible:5,style:{height:"50%",top:0,left:0}},p.map((function(e,t){return i.a.createElement(v,{key:t,url:e,onOpen:function(){return b(e)}})}))),i.a.createElement("div",{style:{position:"fixed",width:"auto",height:"50%",bottom:0,left:0,fontSize:"2em"}},i.a.createElement("span",{style:{color:"white"}},l&&i.a.createElement(v,{url:l,onOpen:function(){return b("")}}))))};u.a.render(i.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.c60ed558.chunk.js.map
{"version":3,"sources":["docs/serviceWorker.ts","src/components/Scanner.tsx","src/components/Sheet.tsx","src/components/Slider.tsx","docs/components/Book.tsx","src/hooks.tsx","docs/components/Button.tsx","docs/index.tsx"],"names":["Boolean","window","location","hostname","match","Quagga","require","Scanner","onStarted","onDetected","onStartedRef","useRef","bool","onDetectedRef","code","useEffect","init","config","err","console","log","current","start","stop","drawRect","box","drawingCtx","color","lineWidth","ImageDebug","drawPath","x","y","onProcessed","result","canvas","ctx","overlay","drawingCanvas","dom","boxes","clearRect","Number","getAttribute","filter","forEach","codeResult","line","id","className","style","width","height","top","bottom","Sheet","children","started","onOpen","onClose","useSpring","set","open","useCallback","canceled","wobbly","stiff","close","velocity","bind","useDrag","last","vy","vxvy","movement","mx","my","cancel","immediate","initial","get","filterTaps","bounds","rubberband","f","useMemo","display","to","py","div","Slider","visible","idx","l","length","getPos","i","firstVis","firstVisIdx","useSprings","springs","prev","wheelOffset","dragOffset","runSprings","xy","vxy","Math","floor","position","prevPosition","rank","configPos","tension","friction","useGesture","onDrag","offset","vx","onWheel","left","map","key","willChange","Book","url","limit","book","urltext","size","isssl","host","data","paths","URL","pathname","split","v","index","find","isbn","_","name","ref","img","src","alt","useAmazon","canopen","useState","error","setError","scale","onHover","e","hovering","down","onClick","styles","padding","zIndex","pointerEvents","span","onError","Button","opened","molasses","items2","App","urls","setUrls","setBook","books","setBooks","setOpened","setStarted","addURL","newURL","slice","pre","addBook","innerHeight","fontSize","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.f185a52e.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React, { useEffect, useRef } from \"react\";\r\nimport config from \"../../config-camera.json\";\r\nimport './Scanner.css'\r\n\r\nconst Quagga = require ('quagga');\r\n\r\ntype ScannerProps = {\r\n    onStarted  :Function,\r\n    onDetected :Function,\r\n}\r\n\r\nexport function Scanner ({onStarted, onDetected}:ScannerProps) {\r\n    const onStartedRef = useRef((bool:boolean)=>onStarted(bool))  // err\r\n    const onDetectedRef  = useRef((code:string)=>onDetected(code))// err\r\n    useEffect (() => {\r\n        Quagga.init(config, (err:any)=> {\r\n            if (err)\r\n                return console.log(err, \"error msg\");\r\n            onStartedRef.current(true)\r\n            Quagga.start()\r\n            console.log('\\t\\t__Scanner Start__');\r\n        })\r\n        return () => {\r\n            Quagga.stop()\r\n            onStartedRef.current(false)\r\n            console.log('\\t\\t~~Scanner Stop~~')\r\n        }\r\n    }, []);\r\n    useEffect(()=>{\r\n        type drawRectProps = { box:any,drawingCtx:any,color?:string,lineWidth?:number }\r\n        const drawRect = ({box,drawingCtx,color=\"green\",lineWidth=2}:drawRectProps) => {\r\n            Quagga.ImageDebug.drawPath(box, {x:0,y:1}, drawingCtx, {color,lineWidth})\r\n        }\r\n        Quagga.onProcessed((result:any) => {\r\n            let drawingCtx = Quagga.canvas.ctx.overlay\r\n            let drawingCanvas = Quagga.canvas.dom.overlay\r\n            if (!result)\r\n                return\r\n            if (result.boxes) {\r\n                drawingCtx.clearRect(0,0,\r\n                    Number(drawingCanvas.getAttribute(\"width\")),\r\n                    Number(drawingCanvas.getAttribute(\"height\"))\r\n                );\r\n                result.boxes\r\n                    .filter( (box:any) => box!==result.box )\r\n                    .forEach( (box:any) => drawRect({box, drawingCtx}) );\r\n            }\r\n            if (result.box) drawRect({box:result.box,drawingCtx,color:\"#00F\"})\r\n            if (!result.codeResult || !result.codeResult.code)\r\n                return\r\n            Quagga.ImageDebug.drawPath(\r\n                result.line, {x:\"x\",y:\"y\"},\r\n                drawingCtx , {color:\"red\",lineWidth:3}\r\n            );\r\n            Quagga.onDetected ((result:any) => onDetectedRef.current(result.codeResult.code) )\r\n        });\r\n    }, [])\r\n    //console.log('\\t\\tScanner Render');\r\n    return <div id=\"interactive\" className=\"viewport\" style={{width:\"100%\",height:\"100%\",top:0,bottom:0}}/>\r\n}\r\n","import React, { useEffect, useCallback, useRef, useMemo } from 'react'\r\nimport { useSpring, animated, config } from 'react-spring'\r\nimport { useDrag } from 'react-use-gesture'\r\nimport './Sheet.css'\r\n\r\ntype SheetProps = {\r\n    height  ?:number\r\n    started ?:boolean,\r\n    onOpen  ?:Function|null,\r\n    onClose ?:Function|null,\r\n    children?:any,\r\n}\r\n\r\nexport function Sheet ({children, height=100, started=false, onOpen=null,onClose=null}:SheetProps) {\r\n    const [{ y }, set] = useSpring(() => ({ y:height }))\r\n    const open=useCallback((canceled=false)=> onOpen&&(onOpen() ,set({ y:0     , config:canceled?config.wobbly:config.stiff }) ),[onOpen, set])\r\n    const close  =useCallback((velocity=0)=> onClose&&(onClose(),set({ y:height, config:{...config.stiff, velocity} }) ),[height, onClose, set])\r\n    const bind = useDrag(\r\n        ({ last, vxvy:[,vy],movement:[mx,my], cancel }) => {\r\n            if (my<-height/3) cancel&&cancel()\r\n            if (last) return ( (my>height*0.5||vy>2.5) && (-100<mx&&mx<100) )? close(vy):open(vy>0)\r\n            set({ y:my, immediate: false, config: config.stiff })\r\n        }, { initial:()=>[0,y.get()], filterTaps:true, bounds:{top:0}, rubberband:true }\r\n    )\r\n    const f = useRef((bool:boolean)=>( bool? open() : close() ))\r\n    useEffect(()=>{ f.current(started) }, [started])\r\n    const style = useMemo(()=>{\r\n        const display = y.to(py => (py < height ? 'block' : 'none'))\r\n        return {display, bottom:`calc(-100vh + ${height-100}px)`, y}\r\n    },[height, y])\r\n    //console.log('\\tRender Sheet');\r\n    return (\r\n        <animated.div className=\"sheet\" {...bind()} style={style}>\r\n            {children}\r\n        </animated.div>\r\n    )\r\n}\r\n","// https://codesandbox.io/s/infinite-slideshow-nigoy?file=/src/index.js\r\n\r\nimport React, {useCallback, useRef} from 'react'\r\nimport { useGesture } from 'react-use-gesture'\r\nimport { useSprings, animated } from 'react-spring'\r\n\r\ntype SliderProps = {\r\n    width   ?:number,\r\n    visible ?:number,\r\n    children?:any,\r\n    style   ?:any\r\n}\r\n\r\nexport function Slider ({children, width=600,visible=4,style={}}:SliderProps) {\r\n    const idx = useCallback((x,l=children.length) => (x<0 ? x+l : x) % l, [children])\r\n    const getPos = useCallback((i, firstVis, firstVisIdx) => idx(i - firstVis + firstVisIdx), [idx])\r\n    const [springs, set] = useSprings(children.length, i => ({ x : (i<children.length-1?i:-1)*width }) )\r\n    const prev        = useRef([0, 1])\r\n    const wheelOffset = useRef(0)\r\n    const dragOffset  = useRef(0)\r\n    const runSprings = useCallback((xy, vxy)=>{\r\n        const firstVis = idx(Math.floor(xy / width) % children.length)\r\n        const firstVisIdx = vxy < 0 ? children.length - visible - 1 : 1\r\n        set((i:{}) => {\r\n            const position     = getPos(i, firstVis       , firstVisIdx)\r\n            const prevPosition = getPos(i, prev.current[0], prev.current[1])\r\n            const rank = firstVis - (xy<0?children.length:0) + position - firstVisIdx\r\n            const configPos = vxy > 0 ? position : children.length - position\r\n            return {\r\n                x: (-xy % (width * children.length)) + width * rank,\r\n                immediate: vxy < 0 ? prevPosition > position : prevPosition < position,\r\n                config: { tension: (1 + children.length - configPos) * 100, friction: 30 + configPos * 40 }\r\n            }\r\n        })\r\n        prev.current = [firstVis, firstVisIdx]\r\n    }, [idx, getPos, width, visible, set, children.length] )\r\n    const bind = useGesture({\r\n        onDrag :({offset:[x,],vxvy:[vx,]})=>{if(vx){dragOffset.current=-x;runSprings(wheelOffset.current-x, -vx)}},\r\n        onWheel:({offset:[,y],vxvy:[,vy]})=>{if(vy){dragOffset.current= y;runSprings(wheelOffset.current+y,  vy)}},\r\n    })\r\n    //return null\r\n    //console.log('\\t\\tRender Slider');\r\n    return (\r\n        <div {...bind()} style={{position:\"absolute\",bottom:0,left:0,width:\"100%\",height:\"100%\"}}>\r\n          {springs.map(({x}, i) => (\r\n            <animated.div key={i} style={{position:'absolute',x,willChange:'transform',...style}}>\r\n                {children[i]}\r\n            </animated.div>\r\n          ))}\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useMemo, useRef } from 'react'\r\n//import { Spring } from 'react-spring/renderprops'\r\nimport { useSpring, animated } from 'react-spring'\r\nimport { useGesture } from 'react-use-gesture'\r\nimport { useAmazon } from '../../src'//'use-amazon'\r\n\r\ntype BookProps = {\r\n    onOpen?:any,\r\n    style?:any,\r\n    url  ?:string,\r\n    limit?:number,\r\n}\r\n\r\nexport function Book ({url='', limit=400, style={}, onOpen}:BookProps) {\r\n    const book = useAmazon(url)\r\n    const canopen = useRef(false)\r\n    const [error, setError] = useState<boolean>(false)\r\n    const [{scale,x,y}, set] = useSpring(()=>({ scale:1, x:0, y:0 }))\r\n    const bind = useGesture({onHover:(e)=>set({scale:e.hovering?1.1:1}),\r\n        onDrag : ({down,movement:[mx,my],cancel})=>{\r\n            if ((mx**2+my**2 > limit**2) && cancel) cancel()\r\n            set({ x:down?mx:0, y:down?my:0, scale:(-limit/2<my&&my<limit/2)?1.2:0.8 })\r\n            if ((-limit/2<my&&my<limit/2)||mx<-100||100<mx||down||!canopen.current) return null\r\n            canopen.current = false // err\r\n            onOpen()\r\n        },\r\n        onClick : ()=>onOpen()\r\n    })\r\n    const styles = useMemo(()=>({\r\n        div:{width:\"auto\", height:\"100%\", padding:\"50px 50px\",scale,x,y, zIndex:1, ...style} as React.CSSProperties,\r\n        img:{width:\"auto\", height:\"100%\", pointerEvents:\"none\"} as React.CSSProperties,\r\n        span:{position:\"absolute\",bottom:\"1em\",left:\"3em\",color:\"white\"} as React.CSSProperties,\r\n    }),[style,scale,x,y])\r\n    if (error)\r\n        return null\r\n    return (\r\n        <animated.div style={styles.div} {...bind()}>\r\n            <img style={styles.img} {...book.img} onError={()=>setError(true)}/>\r\n            <span style={styles.span}> {book.data.isbn} </span>\r\n        </animated.div>\r\n    )\r\n}\r\n","import { useMemo } from 'react'\r\n\r\n\r\n//const url = 'www.amazon.co.jp/dp/4873119049'\r\ntype PropsType = {\r\n    size?:string,\r\n    isssl?:boolean,\r\n}\r\n\r\nexport function useAmazon (urltext='', {size='LZZZZZZZ',isssl=false}:PropsType={}) {\r\n    const host = `${ isssl?'images-na.ssl-images-':'images-jp.' }amazon.com`\r\n    const data = useMemo(()=>{\r\n        const url = new URL(`${urltext.match('https')?'':'https://'}${urltext}`)\r\n        const paths = url.pathname.split('/').filter(v=>v)\r\n        const index = paths.map((v,i) => v==='dp'&&i ).find(v=>v) || 0\r\n        //const dpid = paths.find((_,i)=>i===index+1) || ''\r\n        //const asin = ''//dpid[0]==='B' ? paths.find((_,i)=>i===index+1) :''\r\n        const isbn = paths.find((_,i)=>i===index+1) || ''\r\n        const name = index > 0 ? paths[0] : 'xxx'\r\n        const ref  = paths.find(v=>v.match('ref='))?.split('ref=')[1] || ''\r\n        return {url:`${host}/dp/${isbn}`, name, isbn, ref, size}\r\n    }, [urltext, size, host])\r\n    const img = useMemo(()=>{\r\n        const src = `http://${host}/images/P/${data.isbn}.09.${data.size}`\r\n        const alt =  data.name\r\n        return {src, alt}\r\n    }, [data, host])\r\n    return {img, data}\r\n}\r\n","import React, {useEffect, useCallback} from 'react'\r\n//import { Spring } from 'react-spring/renderprops'\r\nimport { useSpring, animated, config } from 'react-spring'\r\nimport { useGesture } from 'react-use-gesture'\r\n\r\ntype ButtonProps = {\r\n    height:number,\r\n    limit :number,\r\n    opened :boolean,\r\n    started:boolean,\r\n    onOpen :Function,\r\n    onClose:Function,\r\n}\r\n\r\nexport function Button ({height,limit,opened,started,onOpen,onClose}:ButtonProps) {\r\n    const [{ scale,x,y }, set] = useSpring(() => ({ scale:1, x:0, y:0 }))\r\n    //const start  =()=>set({y:10  , config:config.stiff })\r\n    const open =useCallback(()=>set({scale:1.5,x:-25,y:-25 , config:config.stiff })  ,[set])\r\n    const start=useCallback(()=>set({scale:1  ,x:0  ,y:+100, config:config.molasses}),[set])\r\n    const close=useCallback(()=>set({scale:1  ,x:0  ,y:0   , config:config.stiff })  ,[set])\r\n    const toggle=()=>{return (opened&&started)?(onClose(), close()):(onOpen(), open())}\r\n    const bind = useGesture({\r\n        onClick: ()=>toggle(),\r\n        onDrag : ({down,movement:[mx,my],cancel})=>{\r\n            if ((mx**2+my**2 > limit**2) && cancel) cancel()\r\n            set({ x:down?mx:0, y:down?my:0,config:config.stiff })\r\n        }\r\n    })\r\n    useEffect(()=>{started?start():close()}, [started, start, close])\r\n    const display= y.to(py=>(py<height?'flex':'none'))\r\n    return (\r\n        <animated.div className=\"action-btn\" {...bind()} style={{display,scale,x,y}}>\r\n            +</animated.div>\r\n    )\r\n}\r\n","import React, { Fragment, useCallback, useState } from 'react'\nimport ReactDOM from 'react-dom'\n//import { Spring } from 'react-spring/renderprops'\nimport './styles.css'\nimport { unregister } from './serviceWorker'\nimport { Scanner, Sheet, Slider } from '../src'//'use-amazon'\nimport { Book, Button } from './components'\n\n//const items1 = [...Array(9)].map((_,i)=>4041013380+i) // typescript 0~9\nconst items2 = [4041013380,4041002877,4041315220,4041067944,4041366054,4041245257]  //角川 true\n//const items = [4041013380,4041002872,4041315224,4041067949,4041366059,4041245255]//角川 false\n\nconst App = () => {\n    const [urls, setUrls] = useState<string[]>([...items2].map(v=>`amazon.com/dp/${v}`))\n    const [book, setBook] = useState<string>('')\n    const [books, setBooks] = useState<string[]>([...items2].map(v=>`amazon.com/dp/${v}`))\n    const [opened, setOpened] = useState<boolean>(false); // sheet stil opened\n    const [started, setStarted] = useState<boolean>(false); // quagga stil inited ?\n    const addURL = useCallback((code:string)=>{\n        console.log('Index add URL');\n        if ( code.length!==10 && code.length!==13 ) return\n        const newURL = code.length===10?code:code.slice(3)\n        if ( urls.filter(url=>url===newURL).length ) return\n        setUrls(pre=>[newURL, ...pre])\n    }, [urls])\n    const addBook = useCallback((url:string)=>setBooks(pre=>[url, ...pre]),[])\n    const height = window.innerHeight - 60\n    console.log(`Index Render ${opened?'':'no '}opened ${started?'':'no '} started`);\n    return (\n        <Fragment>\n            <Button\n                onOpen ={()=>!opened&&setOpened(true)  }//,setStarted(false))}\n                onClose={()=> opened&&setOpened(false) }//,setStarted(false))}\n                height ={height} limit={200} opened={opened} started={started}/>\n            <Sheet\n                onOpen ={()=>!opened&&(setOpened(true), setUrls([]))}\n                onClose={()=> opened&&setOpened(false) }\n                height ={height} started={started} >\n                {opened &&\n                    <Scanner\n                        onStarted ={(bool:boolean)=>setStarted(bool)}\n                        onDetected={(code:string)=>addURL(code)}/>\n                }\n                {(opened && started)&&\n                    <Slider width={200} visible={5} style={{height:\"25%\",bottom:\"25%\",left:0,}}>\n                    {books.map((url,i)=>\n                        <Book key={i} url={url} onOpen={()=>opened&&(setOpened(false),addBook(url))}/>\n                    )}\n                    </Slider>\n                }\n            </Sheet>\n            <Slider width={400} visible={5} style={{height:\"50%\",top:0,left:0,}}>\n                {books.map((url,i)=>\n                    <Book key={i} url={url} onOpen={()=>setBook(url)}/>\n                )}\n            </Slider>\n            {/*debug*/}\n            <div style={{position:\"fixed\",bottom:0,left:0,fontSize:\"2em\"}}>\n                <span style={{color:\"white\"}}>\n                    {book && <Book url={book} onOpen={()=>setBook('')}/>}\n                </span>\n            </div>\n        </Fragment>\n    )\n}\n\nReactDOM.render(<App />, document.getElementById('root'))\nunregister();\n"],"sourceRoot":""}
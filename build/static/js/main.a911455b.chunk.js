(this["webpackJsonpuse-amazon"]=this["webpackJsonpuse-amazon"]||[]).push([[0],{38:function(e){e.exports=JSON.parse('{"inputStream":{"type":"LiveStream","constraints":{"width":{"min":450},"height":{"min":300},"facingMode":"environment","aspectRatio":{"min":1,"max":2}}},"locator":{"patchSize":"medium","halfSample":true},"numOfWorkers":2,"frequency":10,"decoder":{"readers":["ean_reader"]},"locate":true}')},43:function(e,t,n){e.exports=n(54)},48:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var c=n(22),r=n(4),o=n(1),a=n.n(o),i=n(29),u=n.n(i);n(48),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(38),s=(n(49),n(50));function f(e){var t=e.onStarted,n=e.onDetected,c=Object(o.useRef)((function(e){return t(e)})),r=Object(o.useRef)((function(e){return n(e)}));return Object(o.useEffect)((function(){return s.init(l,(function(e){if(e)return console.log(e,"error msg");c.current(!0),s.start(),console.log("\t\t__Scanner Start__")})),function(){s.stop(),c.current(!1),console.log("\t\t~~Scanner Stop~~")}}),[]),Object(o.useEffect)((function(){var e=function(e){var t=e.box,n=e.drawingCtx,c=e.color,r=void 0===c?"green":c,o=e.lineWidth,a=void 0===o?2:o;s.ImageDebug.drawPath(t,{x:0,y:1},n,{color:r,lineWidth:a})};s.onProcessed((function(t){var n=s.canvas.ctx.overlay,c=s.canvas.dom.overlay;t&&(t.boxes&&(n.clearRect(0,0,Number(c.getAttribute("width")),Number(c.getAttribute("height"))),t.boxes.filter((function(e){return e!==t.box})).forEach((function(t){return e({box:t,drawingCtx:n})}))),t.box&&e({box:t.box,drawingCtx:n,color:"#00F"}),t.codeResult&&t.codeResult.code&&(s.ImageDebug.drawPath(t.line,{x:"x",y:"y"},n,{color:"red",lineWidth:3}),s.onDetected((function(e){return r.current(e.codeResult.code)}))))}))}),[]),a.a.createElement("div",{id:"interactive",className:"viewport",style:{width:"100%",height:"100%",top:0,bottom:0}})}var b=n(16),d=n(8),m=n(20);n(51);function g(e){var t=e.children,n=e.height,c=void 0===n?100:n,i=e.started,u=void 0!==i&&i,l=e.onOpen,s=void 0===l?null:l,f=e.onClose,g=void 0===f?null:f,h=Object(d.useSpring)((function(){return{y:c}})),v=Object(r.a)(h,2),O=v[0].y,j=v[1],p=Object(o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return s&&(s(),j({y:0,config:e?d.config.wobbly:d.config.stiff}))}),[s,j]),y=Object(o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return g&&(g(),j({y:c,config:Object(b.a)(Object(b.a)({},d.config.stiff),{},{velocity:e})}))}),[c,g,j]),x=Object(m.a)((function(e){var t=e.last,n=Object(r.a)(e.vxvy,2)[1],o=Object(r.a)(e.movement,2),a=o[0],i=o[1],u=e.cancel;if(i<-c/3&&u&&u(),t)return(i>.5*c||n>2.5)&&-100<a&&a<100?y(n):p(n>0);j({y:i,immediate:!1,config:d.config.stiff})}),{initial:function(){return[0,O.get()]},filterTaps:!0,bounds:{top:0},rubberband:!0}),w=Object(o.useRef)((function(e){return e?p():y()}));Object(o.useEffect)((function(){w.current(u)}),[u]);var E=Object(o.useMemo)((function(){return{display:O.to((function(e){return e<c?"block":"none"})),backgroundColor:"rgba(0,0,0,0)",bottom:"calc(-100vh + ".concat(c-100,"px)"),y:O}}),[c,O]);return a.a.createElement(d.animated.div,Object.assign({className:"sheet"},x(),{style:E}),t)}function h(e){var t=e.children,n=e.width,c=void 0===n?600:n,i=e.visible,u=void 0===i?4:i,l=e.style,s=void 0===l?{}:l,f=Object(o.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length;return(e<0?e+n:e)%n}),[t]),g=Object(o.useCallback)((function(e,t,n){return f(e-t+n)}),[f]),h=Object(d.useSprings)(t.length,(function(e){return{x:(e<t.length-1?e:-1)*c}})),v=Object(r.a)(h,2),O=v[0],j=v[1],p=Object(o.useRef)([0,1]),y=Object(o.useRef)(0),x=Object(o.useRef)(0),w=Object(o.useCallback)((function(e,n){var r=f(Math.floor(e/c)%t.length),o=n<0?t.length-u:0;j((function(a){var i=g(a,r,o),u=g(a,p.current[0],p.current[1]),l=r-(e<0?t.length:0)+i-o,s=n>0?i:t.length-i;return{x:-e%(c*t.length)+c*l,immediate:n<0?u>i:u<i,config:{tension:100*(1+t.length-s),friction:30+40*s}}})),p.current=[r,o]}),[f,g,c,u,j,t.length]),E=Object(m.b)({onDrag:function(e){var t=Object(r.a)(e.offset,1)[0],n=Object(r.a)(e.vxvy,1)[0];n&&(x.current=-t,w(y.current-t,-n))},onWheel:function(e){var t=Object(r.a)(e.offset,2)[1],n=Object(r.a)(e.vxvy,2)[1];n&&(x.current=t,w(y.current+t,n))}});return a.a.createElement("div",Object.assign({},E(),{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"100%"}}),O.map((function(e,n){var c=e.x;return a.a.createElement(d.animated.div,{key:n,style:Object(b.a)({position:"absolute",x:c,willChange:"transform"},s)},t[n])})))}function v(e){var t=e.url,n=void 0===t?"":t,c=e.limit,i=void 0===c?400:c,u=e.style,l=void 0===u?{}:u,s=e.onOpen,f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.size,c=void 0===n?"LZZZZZZZ":n,a=t.isssl,i=void 0!==a&&a,u=t.searches,l=void 0===u?10:u,s=Object(o.useMemo)((function(){return"".concat(i?"images-na.ssl-images-":"images-jp.","amazon.com")}),[i]),f=Object(o.useCallback)((function(e){return"http://".concat(s,"/images/P/").concat(e,".09.").concat(c)}),[s,c]),d=Object(o.useRef)([]),m=Object(o.useState)(null),g=Object(r.a)(m,2),h=g[0],v=g[1],O=Object(o.useRef)(new Image),j=Object(o.useRef)(""),p=Object(o.useMemo)((function(){var t,n=new URL("".concat(e.match("https")?"":"https://").concat(e)).pathname.split("/").filter((function(e){return e})),c=n.map((function(e,t){return"dp"===e&&t})).find((function(e){return e}))||0,r=n.find((function(e,t){return t===c+1}))||"",o=c>0?n[0]:"",a=(null===(t=n.find((function(e){return e.match("ref=")})))||void 0===t?void 0:t.split("ref=")[1])||"";return d.current.push(parseInt(r,10)),{name:o,isbn:r,ref:a}}),[]),y=Object(o.useCallback)((function(){var e=d.current[0],t=d.current.length,n=e+~~((t+1)/2)*(t%2*2-1);if(!(t>l||j.current))return d.current.push(n),v((function(e){return Object(b.a)(Object(b.a)({},e),{},{src:f(n)})}))}),[f,l]);return Object(o.useEffect)((function(){if(!j.current){var e=d.current.slice(-1)[0]||p.isbn,t=f(e),n=p.name||"";v({src:t,alt:n}),O.current.src=t,O.current.onload=function(){var e=O.current.width,t=O.current.height;if(e<2||t<2)return y();j.current=O.current.src}}}),[f,y,p,null===h||void 0===h?void 0:h.src]),{path:p,image:O,img:h}}(n),g=Object(o.useRef)(!1),h=Object(d.useSpring)((function(){return{scale:1,x:0,y:0}})),v=Object(r.a)(h,2),O=v[0],j=O.scale,p=O.x,y=O.y,x=v[1],w=Object(m.b)({onHover:function(e){return x({scale:e.hovering?1.1:1})},onDrag:function(e){var t=e.down,n=Object(r.a)(e.movement,2),c=n[0],o=n[1],a=e.cancel;if(Math.pow(c,2)+Math.pow(o,2)>Math.pow(i,2)&&a&&a(),x({x:t?c:0,y:t?o:0,scale:-i/2<o&&o<i/2?1.2:.8}),-i/2<o&&o<i/2||c<-100||100<c||t||!g.current)return null;g.current=!1,s()},onClick:function(){return s()}}),E=Object(o.useMemo)((function(){return{div:Object(b.a)({width:"auto",height:"100%",padding:"50px 50px",scale:j,x:p,y:y,zIndex:1},l),img:{width:"auto",height:"100%",pointerEvents:"none"},span:{position:"absolute",bottom:"1em",left:"3em",color:"white"}}}),[l,j,p,y]);return console.log("\t\tRender Book",f.img),a.a.createElement(d.animated.div,Object.assign({style:E.div},w()),f.img&&a.a.createElement("img",Object.assign({style:E.img},f.img)))}function O(e){var t=e.height,n=e.limit,c=e.opened,i=e.started,u=e.onOpen,l=e.onClose,s=Object(d.useSpring)((function(){return{scale:1,x:0,y:0}})),f=Object(r.a)(s,2),b=f[0],g=b.scale,h=b.x,v=b.y,O=f[1],j=Object(o.useCallback)((function(){return O({scale:1.5,x:-25,y:-25,config:d.config.stiff})}),[O]),p=Object(o.useCallback)((function(){return O({scale:1,x:0,y:100,config:d.config.molasses})}),[O]),y=Object(o.useCallback)((function(){return O({scale:1,x:0,y:0,config:d.config.stiff})}),[O]),x=Object(m.b)({onClick:function(){return c&&i?(l(),y()):(u(),j())},onDrag:function(e){var t=e.down,c=Object(r.a)(e.movement,2),o=c[0],a=c[1],i=e.cancel;Math.pow(o,2)+Math.pow(a,2)>Math.pow(n,2)&&i&&i(),O({x:t?o:0,y:t?a:0,config:d.config.stiff})}});Object(o.useEffect)((function(){i?p():y()}),[i,p,y]);var w=v.to((function(e){return e<t?"flex":"none"}));return a.a.createElement(d.animated.div,Object.assign({className:"action-btn"},x(),{style:{display:w,scale:g,x:h,y:v}}),"+")}var j=[4041013380,4041002877,4041315220,4041067944,4041366054,4041245257],p=function(){var e=Object(o.useState)([]),t=Object(r.a)(e,2),n=t[0],i=t[1],u=Object(o.useState)(""),l=Object(r.a)(u,2),s=l[0],b=l[1],d=Object(o.useState)([].concat(j).map((function(e){return"amazon.com/dp/".concat(e,"/")}))),m=Object(r.a)(d,2),p=m[0],y=m[1],x=Object(o.useState)(!1),w=Object(r.a)(x,2),E=w[0],k=w[1],C=Object(o.useState)(!1),S=Object(r.a)(C,2),R=S[0],M=S[1],z=Object(o.useCallback)((function(e){if(console.log("Index add URL"),10===e.length||13===e.length){var t=10===e.length?e:e.slice(3);n.filter((function(e){return e===t})).length||i((function(e){return[t].concat(Object(c.a)(e))}))}}),[n]),D=Object(o.useCallback)((function(e){return y((function(t){return[e].concat(Object(c.a)(t))}))}),[]),I=window.innerHeight-60;return console.log("Index Render ".concat(E?"":"no ","opened ").concat(R?"":"no "," started")),a.a.createElement(o.Fragment,null,a.a.createElement(O,{onOpen:function(){return!E&&k(!0)},onClose:function(){return E&&k(!1)},height:I,limit:200,opened:E,started:R}),a.a.createElement(g,{onOpen:function(){return!E&&(k(!0),i([]))},onClose:function(){return E&&k(!1)},height:I,started:R},E&&a.a.createElement(f,{onStarted:function(e){return M(e)},onDetected:function(e){return z(e)}}),E&&R&&a.a.createElement(h,{width:200,visible:5,style:{height:"25%",bottom:"25%",left:0}},n.map((function(e,t){return a.a.createElement(v,{key:t,url:e,onOpen:function(){return E&&(k(!1),D(e))}})})))),a.a.createElement(h,{width:200,visible:5,style:{height:"50%",top:0,left:0}},p.map((function(e,t){return a.a.createElement(v,{key:t,url:e,onOpen:function(){return b(e)}})}))),a.a.createElement("div",{style:{position:"fixed",bottom:0,left:0,fontSize:"2em"}},a.a.createElement("span",{style:{color:"white"}},s&&a.a.createElement(v,{url:s,onOpen:function(){return b("")}}))))};u.a.render(a.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.a911455b.chunk.js.map
{"version":3,"sources":["docs/serviceWorker.ts","src/components/Scanner.tsx","src/components/Sheet.tsx","src/components/Slider.tsx","docs/components/Book.tsx","src/hooks.tsx","docs/components/Button.tsx","docs/index.tsx"],"names":["Boolean","window","location","hostname","match","Quagga","require","Scanner","onStarted","onDetected","onStartedRef","useRef","bool","onDetectedRef","code","useEffect","init","config","err","console","log","current","start","stop","drawRect","box","drawingCtx","color","lineWidth","ImageDebug","drawPath","x","y","onProcessed","result","canvas","ctx","overlay","drawingCanvas","dom","boxes","clearRect","Number","getAttribute","filter","forEach","codeResult","line","useMemo","position","top","left","width","height","borderRadius","id","className","style","bottom","Sheet","children","started","onOpen","onClose","useSpring","set","open","useCallback","canceled","wobbly","stiff","close","velocity","bind","useDrag","last","vy","vxvy","movement","mx","my","cancel","immediate","initial","get","filterTaps","bounds","rubberband","f","display","to","py","zIndex","backgroundColor","touchAction","div","Slider","visible","len","length","idx","l","getPos","i","firstVis","firstVisIdx","useSprings","springs","prev","wheelOffset","dragOffset","runSprings","xy","vxy","Math","floor","prevPosition","configPos","tension","friction","useGesture","onDrag","offset","vx","onWheel","map","key","willChange","Book","url","limit","book","urltext","size","isssl","searches","host","getsrc","num","isbns","useState","img","setImg","image","Image","srcRef","path","paths","URL","pathname","split","v","index","find","isbn","_","name","ref","push","parseInt","onError","pre","src","slice","alt","onload","useAmazon","cantopen","scale","onHover","e","hovering","onClick","stopPropagation","down","notOpen","styles","pointerEvents","Button","opened","molasses","fontSize","right","background","alignItems","justifyContent","items2","App","urls","setUrls","setBook","books","setBooks","setOpened","setStarted","nowDetecting","addURL","newcode","setTimeout","addBook","innerHeight","innerWidth","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"ijBAYoBA,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2D,YChBAC,EAASC,EAAS,IAOjB,SAASC,EAAT,GAAyD,IAAtCC,EAAqC,EAArCA,UAAWC,EAA0B,EAA1BA,WAC3BC,EAAeC,kBAAO,SAACC,GAAD,OAAgBJ,EAAUI,MAChDC,EAAiBF,kBAAO,SAACG,GAAD,OAAeL,EAAWK,MACxDC,qBAAW,WAQP,OAPAV,EAAOW,KAAKC,GAAQ,SAACC,GACjB,GAAIA,EACA,OAAOC,QAAQC,IAAIF,EAAK,aAC5BR,EAAaW,SAAQ,GACrBhB,EAAOiB,QACPH,QAAQC,IAAI,4BAET,WACHf,EAAOkB,OACPb,EAAaW,SAAQ,GACrBF,QAAQC,IAAI,2BAEjB,IACHL,qBAAU,WAEN,IAAMS,EAAW,SAAC,GAA8D,IAA7DC,EAA4D,EAA5DA,IAAIC,EAAwD,EAAxDA,WAAwD,IAA7CC,aAA6C,MAAvC,QAAuC,MAA/BC,iBAA+B,MAArB,EAAqB,EAC3EvB,EAAOwB,WAAWC,SAASL,EAAK,CAACM,EAAE,EAAEC,EAAE,GAAIN,EAAY,CAACC,QAAMC,eAElEvB,EAAO4B,aAAY,SAACC,GAChB,IAAIR,EAAarB,EAAO8B,OAAOC,IAAIC,QAC/BC,EAAgBjC,EAAO8B,OAAOI,IAAIF,QACjCH,IAEDA,EAAOM,QACPd,EAAWe,UAAU,EAAE,EACnBC,OAAOJ,EAAcK,aAAa,UAClCD,OAAOJ,EAAcK,aAAa,YAEtCT,EAAOM,MACFI,QAAQ,SAACnB,GAAD,OAAaA,IAAMS,EAAOT,OAClCoB,SAAS,SAACpB,GAAD,OAAaD,EAAS,CAACC,MAAKC,mBAE1CQ,EAAOT,KAAKD,EAAS,CAACC,IAAIS,EAAOT,IAAIC,aAAWC,MAAM,SACrDO,EAAOY,YAAeZ,EAAOY,WAAWhC,OAE7CT,EAAOwB,WAAWC,SACdI,EAAOa,KAAM,CAAChB,EAAE,IAAIC,EAAE,KACtBN,EAAa,CAACC,MAAM,MAAMC,UAAU,IAExCvB,EAAOI,YAAY,SAACyB,GAAD,OAAgBrB,EAAcQ,QAAQa,EAAOY,WAAWhC,gBAEhF,IACWkC,mBAA6B,iBAAK,CAC5CC,SAAU,WAAYC,IAAI,EAAGC,KAAM,EACnCC,MAAO,QAASC,OAAQ,OAAQC,aAAa,mBAC7C,IAEJ,OAAO,yBAAKC,GAAG,cAAcC,UAAU,WAAWC,MAAO,CAACL,MAAM,OAAOC,OAAO,OAAOH,IAAI,EAAEQ,OAAO,K,2BChD/F,SAASC,EAAT,GAA6F,IAA5EC,EAA2E,EAA3EA,SAA2E,IAAjEP,cAAiE,MAA1D,IAA0D,MAArDQ,eAAqD,aAAtCC,cAAsC,MAA/B,KAA+B,MAA1BC,eAA0B,MAAlB,KAAkB,IAC1EC,qBAAU,iBAAO,CAAEhC,EAAEqB,MADqD,mBACtFrB,EADsF,KACtFA,EAAKiC,EADiF,KAEzFC,EAAKC,uBAAY,eAACC,EAAD,+DAAmBN,IAASA,IAAUG,EAAI,CAAEjC,EAAE,EAAQf,OAAOmD,EAASnD,SAAOoD,OAAOpD,SAAOqD,WAAW,CAACR,EAAQG,IAChIM,EAAQJ,uBAAY,eAACK,EAAD,uDAAU,EAAV,OAAeT,IAAUA,IAAUE,EAAI,CAAEjC,EAAEqB,EAAQpC,OAAO,2BAAIA,SAAOqD,OAAZ,IAAmBE,kBAAe,CAACnB,EAAQU,EAASE,IACjIQ,EAAOC,aACT,YAAoD,IAAjDC,EAAgD,EAAhDA,KAAaC,EAAmC,cAA1CC,KAA0C,sBAA/BC,SAA+B,GAArBC,EAAqB,KAAlBC,EAAkB,KAAbC,EAAa,EAAbA,OAElC,GADID,GAAI3B,EAAO,GAAG4B,GAAQA,IACtBN,EAAM,OAAUK,EAAU,GAAP3B,GAAYuB,EAAG,OAAU,IAAIG,GAAIA,EAAG,IAAQR,EAAMK,GAAIV,EAAKU,EAAG,GACrFX,EAAI,CAAEjC,EAAEgD,EAAIE,WAAW,EAAOjE,OAAQA,SAAOqD,UAC9C,CAAEa,QAAQ,iBAAI,CAAC,EAAEnD,EAAEoD,QAAQC,YAAW,EAAMC,OAAO,CAACpC,IAAI,GAAIqC,YAAW,IAExEC,EAAI7E,kBAAO,SAACC,GAAD,OAAkBA,EAAMsD,IAASK,OAClDxD,qBAAU,WAAMyE,EAAEnE,QAAQwC,KAAY,CAACA,IACvC,IAAMJ,EAAQT,mBAA6B,WACvC,IAAMU,EAAM,wBAAoBL,EAAO,IAA3B,OACNoC,EAAUzD,EAAE0D,IAAG,SAAAC,GAAE,OAAIA,EAAGtC,KAAsB,QAAQ,OAC5D,MAAO,CACHK,SAAQ1B,IAAGmB,KAAM,MAAQC,MAAM,OAAQC,OAAO,sBAC9CoC,UAASxC,SAAS,QAASK,aAAa,cAAesC,OAAO,IAC9DC,gBAAgB,gBAAiBC,YAAa,UAEpD,CAACzC,EAAQrB,IAEX,OACI,kBAAC,WAAS+D,IAAV,eAAcvC,UAAU,SAAYiB,IAApC,CAA4ChB,MAAOA,IAC9CG,GCxBN,SAASoC,EAAT,GAAwE,IAAtDpC,EAAqD,EAArDA,SAAqD,IAA3CR,aAA2C,MAArC,IAAqC,MAAjC6C,eAAiC,MAAzB,EAAyB,MAAvBxC,aAAuB,MAAjB,GAAiB,EACpEyC,EAAMlD,mBAAQ,kBAAKY,EAASuC,OAAOF,EAASrC,EAASuC,OAAOF,IAAQ,CAACrC,EAASqC,IAC9EG,EAAMjC,uBAAY,SAACpC,GAAD,IAAGsE,EAAH,uDAAKH,EAAL,OAAcnE,EAAE,EAAIA,EAAEsE,EAAItE,GAAKsE,IAAG,CAACzC,IACrD0C,EAASnC,uBAAY,SAACoC,EAAGC,EAAUC,GAAd,OAA8BL,EAAIG,EAAIC,EAAWC,KAAc,CAACL,IAHjB,EAInDM,qBAAWR,GAAK,SAAAK,GAAC,MAAK,CAAExE,GAAKwE,EAAEL,EAAI,EAAEK,GAAG,GAAGnD,MAJQ,mBAInEuD,EAJmE,KAI1D1C,EAJ0D,KAKpE2C,EAAcjG,iBAAO,CAAC,EAAG,IACzBkG,EAAclG,iBAAO,GACrBmG,EAAcnG,iBAAO,GACrBoG,EAAa5C,uBAAY,SAAC6C,EAAIC,GAChC,IAAMT,EAAWJ,EAAIc,KAAKC,MAAMH,EAAK5D,GAAS8C,GACxCO,EAAeQ,EAAI,EAAGf,EAAID,EAAQ,EACxChC,GAAI,SAACsC,GACD,IAAMtD,EAAeqD,EAAOC,EAAGC,EAAiBC,GAC1CW,EAAed,EAAOC,EAAGK,EAAKvF,QAAQ,GAAIuF,EAAKvF,QAAQ,IAEvDgG,EAAYJ,EAAM,EAAIhE,EAAWiD,EAAIjD,EAAS,EACpD,MAAO,CACHlB,GAAKiF,GAAM5D,EAAM8C,GAAQ9C,GAHhBoD,GAAYQ,EAAG,EAAEd,EAAI,GAAKjD,EAAWwD,GAI9CvB,UAAW+B,EAAI,EAAIG,EAAanE,EAAWmE,EAAanE,EACxDhC,OAAQ,CAAEqG,QAA0B,KAAjB,EAAEpB,EAAImB,GAAgBE,SAAS,GAAa,GAAVF,OAG7DT,EAAKvF,QAAU,CAACmF,EAAUC,KAC3B,CAACL,EAAKE,EAAQlD,EAAO6C,EAAShC,EAAKiC,IAChCzB,EAAO+C,YAAW,CACpBC,OAAQ,gBAAU1F,EAAV,cAAE2F,OAAF,MAAoBC,EAApB,cAAc9C,KAAd,aAA4B8C,IAAMb,EAAWzF,SAASU,EAAGgF,EAAWF,EAAYxF,QAAQU,GAAI4F,KACpGC,QAAQ,gBAAW5F,EAAX,cAAE0F,OAAF,MAAqB9C,EAArB,cAAcC,KAAd,aAA4BD,IAAMiC,EAAYxF,QAASW,EAAG+E,EAAWD,EAAWzF,QAAQW,EAAI4C,OAGxG,OACI,yCAASH,IAAT,CAAiBhB,MAAO,CAACR,SAAS,WAAWS,OAAO,EAAEP,KAAK,EAAEC,MAAM,OAAOC,OAAO,UAC9EsD,EAAQkB,KAAI,WAAMtB,GAAN,IAAExE,EAAF,EAAEA,EAAF,OACX,kBAAC,WAASgE,IAAV,CAAc+B,IAAKvB,EAAG9C,MAAK,aAAGR,SAAS,WAAWlB,IAAEgG,WAAW,aAAetE,IACzEG,EAAS2C,QClCnB,SAASyB,EAAT,GAAiE,IAAD,IAAhDC,WAAgD,MAA5C,GAA4C,MAAxCC,aAAwC,MAAlC,IAAkC,MAA7BzE,aAA6B,MAAvB,GAAuB,EAAnBK,EAAmB,EAAnBA,OAC1CqE,ECPH,WAAyF,IAArEC,EAAoE,uDAA5D,GAA4D,yDAAJ,GAAI,IAAvDC,YAAuD,MAAlD,WAAkD,MAAvCC,aAAuC,aAA3BC,gBAA2B,MAAlB,GAAkB,EACrFC,EAAOxF,mBAAQ,2BAAQsF,EAAM,wBAAwB,aAAtC,gBAAgE,CAACA,IAChFG,EAAStE,uBAAY,SAACuE,GAAD,uBAA+BF,EAA/B,qBAAgDE,EAAhD,eAA0DL,KAAO,CAACG,EAAKH,IAC5FM,EAAQhI,iBAAiB,IAH4D,EAIrEiI,mBAAc,MAJuD,mBAIpFC,EAJoF,KAI/EC,EAJ+E,KAKrFC,EAAQpI,iBAAyB,IAAIqI,OACrCC,EAAStI,iBAAe,IACxBuI,EAAOlG,mBAAQ,WAAK,IAAD,EAGfmG,EADM,IAAIC,IAAJ,UAAWhB,EAAQhI,MAAM,SAAS,GAAG,YAArC,OAAkDgI,IAC5CiB,SAASC,MAAM,KAAK1G,QAAO,SAAA2G,GAAC,OAAEA,KAC1CC,EAAQL,EAAMtB,KAAI,SAAC0B,EAAEhD,GAAH,MAAa,OAAJgD,GAAUhD,KAAIkD,MAAK,SAAAF,GAAC,OAAEA,MAAM,EAGvDG,EAAOP,EAAMM,MAAK,SAACE,EAAEpD,GAAH,OAAOA,IAAIiD,EAAM,MAAM,GACzCI,EAAOJ,EAAQ,EAAIL,EAAM,GAAK,GAC9BU,GAAO,UAAAV,EAAMM,MAAK,SAAAF,GAAC,OAAEA,EAAEnJ,MAAM,kBAAtB,eAAgCkJ,MAAM,QAAQ,KAAM,GAGjE,OAFAX,EAAMtH,QAAQyI,KAAMC,SAASL,EAAM,KAE5B,CAACE,OAAMF,OAAMG,SACtB,CAACzB,IACG4B,EAAU7F,uBAAY,WACxB,IAAM8F,EAAMtB,EAAMtH,QAAQ,GACpB6E,EAAMyC,EAAMtH,QAAQ8E,OACpBuC,EAAMuB,MAAU/D,EAAI,GAAG,IAAIA,EAAI,EAAE,EAAE,GACzC,KAAGA,EAAMqC,GAAYU,EAAO5H,SAG5B,OAFAsH,EAAMtH,QAAQyI,KAAMpB,GAEbI,GAAO,SAACmB,GAAD,mBAAC,eAAeA,GAAhB,IAAqBC,IAAIzB,EAAOC,UAC/C,CAACD,EAAQF,IAoBZ,OAnBAxH,qBAAU,WACN,IAAIkI,EAAO5H,QAAX,CAEA,IAAMqH,EAAMC,EAAMtH,QAAQ8I,OAAO,GAAG,IAAMjB,EAAKQ,KACzCQ,EAAMzB,EAAOC,GACb0B,EAAOlB,EAAKU,MAAQ,GAC1Bd,EAAO,CAACoB,MAAIE,QACZrB,EAAM1H,QAAQ6I,IAAMA,EACpBnB,EAAM1H,QAAQgJ,OAAS,WACnB,IAAMjH,EAAQ2F,EAAM1H,QAAQ+B,MACtBC,EAAS0F,EAAM1H,QAAQgC,OAE7B,GAAID,EAAQ,GAAKC,EAAS,EACtB,OAAO2G,IACXf,EAAO5H,QAAU0H,EAAM1H,QAAQ6I,QAGpC,CAACzB,EAAQuB,EAASd,EAAlB,OAAwBL,QAAxB,IAAwBA,OAAxB,EAAwBA,EAAKqB,MAEzB,CAAChB,OAAMH,QAAOF,OD1CRyB,CAAUrC,GACjBsC,EAAW5J,kBAAO,GAF2C,EAGxCqD,qBAAU,iBAAK,CAAEwG,MAAM,EAAGzI,EAAE,EAAGC,EAAE,MAHO,0BAG3DwI,EAH2D,EAG3DA,MAAMzI,EAHqD,EAGrDA,EAAEC,EAHmD,EAGnDA,EAAIiC,EAH+C,KAI7DQ,EAAO+C,YAAW,CACpBiD,QAAQ,SAACC,GAAD,OAAKzG,EAAI,CAACuG,MAAME,EAAEC,SAAS,IAAI,KACvCC,QAAQ,SAACF,GAAD,OAAM5G,IAAU4G,EAAEG,mBAC1BpD,OAAQ,YAA8C,IAA5CqD,EAA2C,EAA3CA,KAAWnD,EAAgC,cAAtC9C,KAAsC,sBAA3BC,SAA2B,GAAjBC,EAAiB,KAAdC,EAAc,KAAVC,EAAU,EAAVA,OAClC,SAAAF,EAAI,GAAJ,SAAMC,EAAI,GAAV,SAAckD,EAAO,IAAMjD,GAAQA,IACxC,IAAM8F,EAAU,IAAI7D,KAAKC,MAAMpC,IAAK,EAAEmC,KAAKC,MAAMQ,IAAKmD,GAAMP,EAASlJ,QAGrE,GAFA4C,EAAI,CAAElC,EAAE+I,EAAK/F,EAAG,EAAG/C,EAAE8I,EAAK9F,EAAG,EAAGwF,MAAOO,GAAS7D,KAAKC,MAAMnC,GAAIkD,EAAM,EAAG,IAAI,KAC5E/G,QAAQC,IAAI,IAAI8F,KAAKC,MAAMpC,GAAI,EAAEmC,KAAKC,MAAMQ,GAAImD,EAAKP,EAASlJ,SAC1D0J,EAAS,OAAO,KACpBR,EAASlJ,SAAU,EACnByC,OAGFkH,EAAShI,mBAAQ,iBAAK,CACxB+C,IAAI,aAAC3C,MAAM,OAAOC,OAAO,OAAOmH,QAAMzI,IAAEC,IAAG4D,OAAO,GAAMnC,GACxDoF,IAAI,CAACzF,MAAM,OAAOC,OAAO,OAAOC,aAAa,MAAM2H,cAAc,WAElE,CAACxH,EAAM+G,EAAMzI,EAAEC,IAElB,OACI,kBAAC,WAAS+D,IAAV,eAActC,MAAOuH,EAAOjF,KAAStB,KAChC0D,EAAKU,KAAO,uCAAKpF,MAAOuH,EAAOnC,KAASV,EAAKU,OEvBnD,SAASqC,EAAT,GAA4E,IAA1D7H,EAAyD,EAAzDA,OAAO6E,EAAkD,EAAlDA,MAAMiD,EAA4C,EAA5CA,OAAOtH,EAAqC,EAArCA,QAAQC,EAA6B,EAA7BA,OAAOC,EAAsB,EAAtBA,QAAsB,EACjDC,qBAAU,iBAAO,CAAEwG,MAAM,EAAGzI,EAAE,EAAGC,EAAE,MADc,0BACrEwI,EADqE,EACrEA,MAAMzI,EAD+D,EAC/DA,EAAEC,EAD6D,EAC7DA,EAAKiC,EADwD,KAGxEC,EAAMC,uBAAY,kBAAIF,EAAI,CAACuG,MAAM,IAAIzI,GAAG,GAAGC,GAAG,GAAKf,OAAOA,SAAOqD,UAAW,CAACL,IAC7E3C,EAAM6C,uBAAY,kBAAIF,EAAI,CAACuG,MAAM,EAAIzI,EAAE,EAAIC,EAAE,IAAMf,OAAOA,SAAOmK,aAAW,CAACnH,IAC7EM,EAAMJ,uBAAY,kBAAIF,EAAI,CAACuG,MAAM,EAAIzI,EAAE,EAAIC,EAAE,EAAMf,OAAOA,SAAOqD,UAAW,CAACL,IAE7EQ,EAAO+C,YAAW,CACpBoD,QAAS,kBAFaO,GAAQtH,GAAUE,IAAWQ,MAAUT,IAAUI,MAGvEuD,OAAS,YAAmC,IAAjCqD,EAAgC,EAAhCA,KAAgC,gBAA3BhG,SAA2B,GAAjBC,EAAiB,KAAdC,EAAc,KAAVC,EAAU,EAAVA,OACxB,SAAAF,EAAI,GAAJ,SAAMC,EAAI,GAAV,SAAckD,EAAO,IAAMjD,GAAQA,IACxChB,EAAI,CAAElC,EAAE+I,EAAK/F,EAAG,EAAG/C,EAAE8I,EAAK9F,EAAG,EAAE/D,OAAOA,SAAOqD,WAG/CmB,EAASzD,EAAE0D,IAAG,SAAAC,GAAE,OAAGA,EAAGtC,KAAoB,OAAO,OACjDI,EAAQT,mBAA6B,WACvC,MAAO,CACHqI,SAAS,MAAO3H,OAAO,MAAO4H,MAAM,MAAOjI,OAAO,MAAOD,MAAM,MAAOE,aAAa,MACnFsC,OAAO,GAAI3C,SAAS,QAASsI,WAAW,QAASC,WAAW,SAAUC,eAAe,YAE1F,IAEH,OADA1K,qBAAU,WAAK8C,EAAQvC,IAAQiD,MAAU,CAACV,EAASvC,EAAOiD,IAEtD,kBAAC,WAASwB,IAAV,eAAcvC,UAAU,cAAiBiB,IAAzC,CAAiDhB,MAAK,2BAAMA,GAAN,IAAagC,UAAS+E,QAAOzI,IAAGC,QAAtF,KC3BR,IAAM0J,EAAS,CAAC,WAAW,WAAW,WAAW,WAAW,WAAW,YAEjEC,EAAM,WAAO,IAAD,EACU/C,mBAAmB,IAD7B,mBACPgD,EADO,KACDC,EADC,OAEUjD,mBAAiB,IAF3B,mBAEPT,EAFO,KAED2D,EAFC,OAGYlD,mBAAmB,UAAI8C,GAAQ7D,KAAI,SAAA0B,GAAC,8BAAmBA,EAAnB,SAHhD,mBAGPwC,EAHO,KAGAC,EAHA,OAIcpD,oBAAkB,GAJhC,mBAIPuC,EAJO,KAICc,EAJD,OAKgBrD,oBAAkB,GALlC,mBAKP/E,EALO,KAKEqI,EALF,KAMRC,EAAexL,iBAAoB,MACnCyL,EAASjI,uBAAY,SAACrD,GACxB,GAA2B,OAAvBqL,EAAa9K,UACE,KAAdP,EAAKqF,QAA6B,KAAdrF,EAAKqF,QAA9B,CACA,IAAMkG,EAAwB,KAAdvL,EAAKqF,OAAYrF,EAAKA,EAAKqJ,MAAM,GAC5CyB,EAAKhJ,QAAO,SAAAqF,GAAG,OAAEA,EAAI7H,MAAMiM,MAAUlG,SAC1CgG,EAAa9K,QAAUgL,EACvBC,YAAW,kBAAKH,EAAa9K,QAAU,OAAO,KAC9CwK,GAAQ,SAAA5B,GAAG,4BAAMA,GAAN,yBAA4BoC,QACvClL,QAAQC,IAAI,oBAAqBiL,OAClC,CAACT,IACEW,EAAUpI,uBAAY,SAAC8D,GAAD,OAAc+D,GAAS,SAAA/B,GAAG,4BAAMA,GAAN,CAAWhC,SAAM,IAEvE,OADA9G,QAAQC,IAAR,uBAA4B+J,EAAO,GAAG,MAAtC,kBAAqDtH,EAAQ,GAAG,MAAhE,aAEI,kBAAC,WAAD,KACI,kBAACqH,EAAD,CACIpH,OAAS,kBAAKqH,GAAQc,GAAU,IAChClI,QAAS,kBAAKoH,GAAQc,GAAU,IAChC5I,OAA4B,IAAnBpD,OAAOuM,YAAkBtE,MAAO,IAAKiD,OAAQA,EAAQtH,QAASA,IAC3E,kBAACF,EAAD,CACIG,OAAS,kBAAKqH,IAASc,GAAU,GAAOH,EAAQ,IAAKD,EAAQ,MAC7D9H,QAAS,kBAAKoH,GAAQc,GAAU,IAChC5I,OAA4B,IAAnBpD,OAAOuM,YAAkB3I,QAASA,GAC1CsH,GACG,kBAAC5K,EAAD,CACIC,UAAY0L,EACZzL,WAAY2L,IAElBjB,GAAUtH,GACR,kBAACmC,EAAD,CAAQ5C,MAAOnD,OAAOwM,WAAW,EAAGxG,QAAS,EAAGxC,MAAO,CAACJ,OAAO,MAAMK,OAAO,MAAMP,KAAK,IACtFyI,EAAK/D,KAAI,SAACI,EAAI1B,GAAL,OACN,kBAACyB,EAAD,CAAMF,IAAKvB,EAAG0B,IAAKA,EACfnE,OAAQ,kBAAIqH,IAASc,GAAU,GAAOM,EAAQtE,YAK9D,kBAACjC,EAAD,CAAQ5C,MAAOnD,OAAOwM,WAAW,EAAGxG,QAAS,EAAGxC,MAAO,CAACJ,OAAO,MAAMH,IAAI,EAAEC,KAAK,IAC3E4I,EAAMlE,KAAI,SAACI,EAAI1B,GAAL,OACP,kBAACyB,EAAD,CAAMF,IAAKvB,EAAG0B,IAAKA,EAAKnE,OAAQ,kBAAIgI,EAAQ7D,UAIpD,yBAAKxE,MAAO,CAACR,SAAS,QAAQG,MAAM,OAAOC,OAAO,MAAMK,OAAO,EAAEP,KAAK,EAAEkI,SAAS,QAC7E,0BAAM5H,MAAO,CAAC9B,MAAM,UACfwG,GAAQ,kBAACH,EAAD,CAAMC,IAAKE,EAAMrE,OAAQ,kBAAIgI,EAAQ,WAOlEY,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,SPqE3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACLlM,QAAQkM,MAAMA,EAAMC,c","file":"static/js/main.c60ed558.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React, { useEffect, useMemo, useRef } from \"react\";\r\nimport config from \"../../config-camera.json\";\r\nconst Quagga = require ('quagga');\r\n\r\ntype ScannerProps = {\r\n    onStarted  :Function,\r\n    onDetected :Function,\r\n}\r\n\r\nexport function Scanner ({onStarted, onDetected}:ScannerProps) {\r\n    const onStartedRef = useRef((bool:boolean)=>onStarted(bool))  // err\r\n    const onDetectedRef  = useRef((code:string)=>onDetected(code))// err\r\n    useEffect (() => {\r\n        Quagga.init(config, (err:any)=> {\r\n            if (err)\r\n                return console.log(err, \"error msg\");\r\n            onStartedRef.current(true)\r\n            Quagga.start()\r\n            console.log('\\t\\t__Scanner Start__');\r\n        })\r\n        return () => {\r\n            Quagga.stop()\r\n            onStartedRef.current(false)\r\n            console.log('\\t\\t~~Scanner Stop~~')\r\n        }\r\n    }, []);\r\n    useEffect(()=>{\r\n        type drawRectProps = { box:any,drawingCtx:any,color?:string,lineWidth?:number }\r\n        const drawRect = ({box,drawingCtx,color=\"green\",lineWidth=2}:drawRectProps) => {\r\n            Quagga.ImageDebug.drawPath(box, {x:0,y:1}, drawingCtx, {color,lineWidth})\r\n        }\r\n        Quagga.onProcessed((result:any) => {\r\n            let drawingCtx = Quagga.canvas.ctx.overlay\r\n            let drawingCanvas = Quagga.canvas.dom.overlay\r\n            if (!result)\r\n                return\r\n            if (result.boxes) {\r\n                drawingCtx.clearRect(0,0,\r\n                    Number(drawingCanvas.getAttribute(\"width\")),\r\n                    Number(drawingCanvas.getAttribute(\"height\"))\r\n                );\r\n                result.boxes\r\n                    .filter( (box:any) => box!==result.box )\r\n                    .forEach( (box:any) => drawRect({box, drawingCtx}) );\r\n            }\r\n            if (result.box) drawRect({box:result.box,drawingCtx,color:\"#00F\"})\r\n            if (!result.codeResult || !result.codeResult.code)\r\n                return\r\n            Quagga.ImageDebug.drawPath(\r\n                result.line, {x:\"x\",y:\"y\"},\r\n                drawingCtx , {color:\"red\",lineWidth:3}\r\n            );\r\n            Quagga.onDetected ((result:any) => onDetectedRef.current(result.codeResult.code) )\r\n        });\r\n    }, [])\r\n    const style = useMemo<React.CSSProperties>(()=>({\r\n        position: \"absolute\", top:0, left: 0,\r\n        width: \"100%;\", height: \"100%\", borderRadius:\"10px 10px 0px\",\r\n    }), [])\r\n    //console.log('\\t\\tScanner Render');\r\n    return <div id=\"interactive\" className=\"viewport\" style={{width:\"100%\",height:\"100%\",top:0,bottom:0}}/>\r\n}\r\n","import React, { useEffect, useCallback, useRef, useMemo } from 'react'\r\nimport { useSpring, animated, config } from 'react-spring'\r\nimport { useDrag } from 'react-use-gesture'\r\n\r\ntype SheetProps = {\r\n    height  ?:number\r\n    started ?:boolean,\r\n    onOpen  ?:Function|null,\r\n    onClose ?:Function|null,\r\n    children?:any,\r\n}\r\n\r\nexport function Sheet ({children, height=100, started=false, onOpen=null,onClose=null}:SheetProps) {\r\n    const [{ y }, set] = useSpring(() => ({ y:height }))\r\n    const open=useCallback((canceled=false)=> onOpen&&(onOpen() ,set({ y:0     , config:canceled?config.wobbly:config.stiff }) ),[onOpen, set])\r\n    const close  =useCallback((velocity=0)=> onClose&&(onClose(),set({ y:height, config:{...config.stiff, velocity} }) ),[height, onClose, set])\r\n    const bind = useDrag(\r\n        ({ last, vxvy:[,vy],movement:[mx,my], cancel }) => {\r\n            if (my<-height/3) cancel&&cancel()\r\n            if (last) return ( (my>height*0.5||vy>2.5) && (-100<mx&&mx<100) )? close(vy):open(vy>0)\r\n            set({ y:my, immediate: false, config: config.stiff })\r\n        }, { initial:()=>[0,y.get()], filterTaps:true, bounds:{top:0}, rubberband:true }\r\n    )\r\n    const f = useRef((bool:boolean)=>( bool? open() : close() ))\r\n    useEffect(()=>{ f.current(started) }, [started])\r\n    const style = useMemo<React.CSSProperties>(()=>{\r\n        const bottom = `calc(-100vh + ${height-100}px)`\r\n        const display = y.to(py =>(py<height?true:false)) ? 'block':'none'\r\n        return {\r\n            bottom, y, left: \"2vw\",  width:\"96vw\", height:\"calc(100vh + 100px)\",\r\n            display, position:\"fixed\", borderRadius:\"4em 4em 0px\", zIndex:100,\r\n            backgroundColor:'rgba(0,0,0,0)', touchAction: \"none\",\r\n        }\r\n    },[height, y])\r\n    //console.log('\\tRender Sheet');\r\n    return (\r\n        <animated.div className=\"sheet\" {...bind()} style={style}>\r\n            {children}\r\n        </animated.div>\r\n    )\r\n}\r\n","// https://codesandbox.io/s/infinite-slideshow-nigoy?file=/src/index.js\r\n\r\nimport React, {useCallback, useRef, useMemo} from 'react'\r\nimport { useGesture } from 'react-use-gesture'\r\nimport { useSprings, animated } from 'react-spring'\r\n\r\ntype SliderProps = {\r\n    width   ?:number,\r\n    visible ?:number,\r\n    children?:any,\r\n    style   ?:any\r\n}\r\n\r\nexport function Slider ({children, width=600,visible=4,style={}}:SliderProps) {\r\n    const len = useMemo(()=>(children.length>visible)?children.length:visible,[children,visible])\r\n    const idx = useCallback((x,l=len) => (x<0 ? x+l : x) % l, [children])\r\n    const getPos = useCallback((i, firstVis, firstVisIdx) => idx(i - firstVis + firstVisIdx), [idx])\r\n    const [springs, set] = useSprings(len, i => ({ x : (i<len-1?i:-1)*width }) )\r\n    const prev        = useRef([0, 1])\r\n    const wheelOffset = useRef(0)\r\n    const dragOffset  = useRef(0)\r\n    const runSprings = useCallback((xy, vxy)=>{\r\n        const firstVis = idx(Math.floor(xy / width) % len)\r\n        const firstVisIdx = (vxy<0)?len-visible:1\r\n        set((i:any) => {\r\n            const position     = getPos(i, firstVis       , firstVisIdx)\r\n            const prevPosition = getPos(i, prev.current[0], prev.current[1])\r\n            const rank = firstVis - (xy<0?len:0) + position - firstVisIdx\r\n            const configPos = vxy > 0 ? position : len-position-1\r\n            return {\r\n                x: (-xy % (width*len)) + width*rank,\r\n                immediate: vxy<0 ? prevPosition>position : prevPosition<position,\r\n                config: { tension:(1+len-configPos)*100, friction:30+configPos*40 }\r\n            }\r\n        })\r\n        prev.current = [firstVis, firstVisIdx]\r\n    }, [idx, getPos, width, visible, set, len] )\r\n    const bind = useGesture({\r\n        onDrag :({offset:[x,],vxvy:[vx,]})=>vx&&( dragOffset.current=-x, runSprings(wheelOffset.current-x, -vx) ),\r\n        onWheel:({offset:[,y],vxvy:[,vy]})=>vy&&( wheelOffset.current= y, runSprings(dragOffset.current+y,  vy) ),\r\n    })\r\n    //console.log('\\t\\tRender Slider');\r\n    return (\r\n        <div {...bind()} style={{position:\"absolute\",bottom:0,left:0,width:\"100%\",height:\"100%\"}}>\r\n          {springs.map(({x}, i) => (\r\n            <animated.div key={i} style={{position:'absolute',x,willChange:'transform',...style}}>\r\n                {children[i]}\r\n            </animated.div>\r\n          ))}\r\n        </div>\r\n    )\r\n}\r\n","import React, { useMemo, useRef } from 'react'\r\nimport { useGesture } from 'react-use-gesture'\r\nimport { useSpring, animated } from 'react-spring'\r\nimport { useAmazon } from '../../src' //'use-amazon'\r\n\r\ntype BookProps = {\r\n    onOpen?:any,\r\n    style?:any,\r\n    url  ?:string,\r\n    limit?:number,\r\n}\r\n\r\nexport function Book ({url='', limit=400, style={}, onOpen}:BookProps) {\r\n    const book = useAmazon(url)\r\n    const cantopen = useRef(false)\r\n    const [{scale,x,y}, set] = useSpring(()=>({ scale:1, x:0, y:0 }))\r\n    const bind = useGesture({\r\n        onHover:(e)=>set({scale:e.hovering?1.1:1}),\r\n        onClick:(e)=>(onOpen(), e.stopPropagation()),\r\n        onDrag :({down,vxvy:[vx,],movement:[mx,my],cancel})=>{\r\n            if ((mx**2+my**2 > limit**2) && cancel) cancel()\r\n            const notOpen = 100<Math.floor(mx)||2<Math.floor(vx)||down||cantopen.current\r\n            set({ x:down?mx:0, y:down?my:0, scale:(notOpen&&Math.floor(my)<limit/2)?1.2:0.8 })\r\n            console.log(100<Math.floor(mx),2<Math.floor(vx),down,cantopen.current);\r\n            if (notOpen) return null\r\n            cantopen.current = true\r\n            onOpen()\r\n        },\r\n    })\r\n    const styles = useMemo(()=>({\r\n        div:{width:\"auto\",height:\"100%\",scale,x,y, zIndex:1, ...style} as React.CSSProperties,\r\n        img:{width:\"auto\",height:\"100%\",borderRadius:\"1em\",pointerEvents:\"none\", } as React.CSSProperties,\r\n        //span:{position:\"absolute\",bottom:\"1em\",left:\"3em\",color:\"white\"} as React.CSSProperties,\r\n    }),[style,scale,x,y])\r\n    //console.log('\\t\\tRender Book', book.img);\r\n    return (\r\n        <animated.div style={styles.div} {...bind()}>\r\n            {book.img && <img style={styles.img} {...book.img}/>}\r\n        </animated.div>\r\n    )\r\n}\r\n","import { useCallback, useState, useEffect, useMemo, useRef  } from 'react'\r\ntype PropsType = {\r\n    size?:string,\r\n    isssl?:boolean,\r\n    searches?:number,\r\n}\r\nexport function useAmazon (urltext='', {size='LZZZZZZZ',isssl=false,searches=10}:PropsType={}) {\r\n    const host = useMemo(()=>`${ isssl?'images-na.ssl-images-':'images-jp.' }amazon.com`,[isssl])\r\n    const getsrc = useCallback((num:number|string)=>`http://${host}/images/P/${num}.09.${size}`,[host,size])\r\n    const isbns = useRef<number[]>([])                       // TO CALC NEXT SRC!\r\n    const [img, setImg] = useState<any>(null)                  // RETURN MAIN OBJ\r\n    const image = useRef<HTMLImageElement>(new Image())\r\n    const srcRef = useRef<string>('')\r\n    const path = useMemo(()=>{\r\n        //const url = new URL(`${urlRef.current.match('https')?'':'https://'}${urlRef.current}`)\r\n        const url = new URL(`${urltext.match('https')?'':'https://'}${urltext}`)\r\n        const paths = url.pathname.split('/').filter(v=>v)\r\n        const index = paths.map((v,i) => v==='dp'&&i ).find(v=>v) || 0\r\n        //const dpid = paths.find((_,i)=>i===index+1) || ''\r\n        //const asin = ''//dpid[0]==='B' ? paths.find((_,i)=>i===index+1) :''\r\n        const isbn = paths.find((_,i)=>i===index+1) || ''\r\n        const name = index > 0 ? paths[0] : ''\r\n        const ref  = paths.find(v=>v.match('ref='))?.split('ref=')[1] || ''\r\n        isbns.current.push( parseInt(isbn, 10) )\r\n        //console.log('\\t__useMemo path__', isbn);\r\n        return {name, isbn, ref}\r\n    },[urltext])\r\n    const onError = useCallback(()=>{\r\n        const pre = isbns.current[0]\r\n        const len = isbns.current.length\r\n        const num = pre + ~~((len+1)/2)*(len%2*2-1)\r\n        if(len > searches || srcRef.current) return                // OVERFLOW !\r\n        isbns.current.push( num )\r\n        //console.log('\\t\\t\\t~~onError~~', num)\r\n        return setImg((pre:any)=>({...pre, src:getsrc(num)}))\r\n    }, [getsrc, searches])\r\n    useEffect(()=>{\r\n        if (srcRef.current)\r\n            return //console.log('useEffect interupt', srcRef.current)\r\n        const num = isbns.current.slice(-1)[0] || path.isbn\r\n        const src = getsrc(num)\r\n        const alt =  path.name || ''\r\n        setImg({src,alt})//init\r\n        image.current.src = src\r\n        image.current.onload = () => {\r\n            const width = image.current.width\r\n            const height = image.current.height\r\n            //console.log('\\t__onLoad__', width, height);\r\n            if (width < 2 || height < 2)\r\n                return onError()\r\n            srcRef.current = image.current.src                     // FINISHED !\r\n        }\r\n        //console.log('\\t__useEffect__ setImg', num)\r\n    }, [getsrc, onError, path, img?.src])\r\n    //console.log('\\tRender useAmazon',isbns.current);\r\n    return {path, image, img}\r\n}\r\n\r\n/*\r\nconst getCorrectURL = useCallback((detectedNum:number, searchesNum:number)=>{\r\n    const xhr = new XMLHttpRequest();\r\n    const url = [...Array(searchesNum)].map((_,i)=>{\r\n        const tryNum = detectedNum+~~(i/2)*(i%2*2-1)\r\n        const tryURL = `http://${host}/images/P/${tryNum}`\r\n        xhr.open(\"HEAD\", tryURL, false);\r\n        xhr.send(null);\r\n        return xhr.status<201? tryURL:false//false\r\n    }).filter(v=>v)[0]\r\n    return url\r\n}, [])*/\r\n","import React, {useEffect, useCallback, useMemo} from 'react'\r\n//import { Spring } from 'react-spring/renderprops'\r\nimport { useSpring, animated, config } from 'react-spring'\r\nimport { useGesture } from 'react-use-gesture'\r\n\r\ntype ButtonProps = {\r\n    height:number,\r\n    limit :number,\r\n    opened :boolean,\r\n    started:boolean,\r\n    onOpen :Function,\r\n    onClose:Function,\r\n}\r\n\r\nexport function Button ({height,limit,opened,started,onOpen,onClose}:ButtonProps) {\r\n    const [{ scale,x,y }, set] = useSpring(() => ({ scale:1, x:0, y:0 }))\r\n    //const start  =()=>set({y:10  , config:config.stiff })\r\n    const open =useCallback(()=>set({scale:1.2,x:-25,y:-25 , config:config.stiff })  ,[set])\r\n    const start=useCallback(()=>set({scale:1  ,x:0  ,y:+100, config:config.molasses}),[set])\r\n    const close=useCallback(()=>set({scale:1  ,x:0  ,y:0   , config:config.stiff })  ,[set])\r\n    const toggle=()=>{return (opened&&started)?(onClose(), close()):(onOpen(), open())}\r\n    const bind = useGesture({\r\n        onClick: ()=>toggle(),\r\n        onDrag : ({down,movement:[mx,my],cancel})=>{\r\n            if ((mx**2+my**2 > limit**2) && cancel) cancel()\r\n            set({ x:down?mx:0, y:down?my:0,config:config.stiff })\r\n        }\r\n    })\r\n    const display= y.to(py=>(py<height?true:false))?'flex':'none'\r\n    const style = useMemo<React.CSSProperties>(()=>{\r\n        return {\r\n            fontSize:\"2em\", bottom:\"1em\", right:\"1em\", height:\"2em\", width:\"2em\", borderRadius:\"4em\",\r\n            zIndex:99, position:\"fixed\", background:\"coral\", alignItems:\"center\", justifyContent:\"center\",\r\n        }\r\n    }, [])\r\n    useEffect(()=>{started?start():close()}, [started, start, close])\r\n    return (\r\n        <animated.div className=\"action-btn\" {...bind()} style={{...style, display, scale, x, y, }}>\r\n            +</animated.div>\r\n    )\r\n}\r\n","import React, { Fragment, useCallback, useState, useRef } from 'react'\nimport ReactDOM from 'react-dom'\n//import { Spring } from 'react-spring/renderprops'\nimport './styles.css'\nimport { unregister } from './serviceWorker'\nimport { Scanner, Sheet, Slider } from '../src'//'use-amazon'\nimport { Book, Button } from './components'\n\n//const items1 = [4041013379,4041013381]//[...Array(3)].map((_,i)=>4041013378+i) // typescript 0~9\n//const items1 = [4041013380,4041002872,4041315224,4041067949,4041366059,4041245255]//角川 false\nconst items2 = [4041013380,4041002877,4041315220,4041067944,4041366054,4041245257]  //角川 true\n\nconst App = () => {\n    const [urls, setUrls] = useState<string[]>([])//([...items2].map(v=>`amazon.com/dp/${v}/`))\n    const [book, setBook] = useState<string>('')\n    const [books, setBooks] = useState<string[]>([...items2].map(v=>`amazon.com/dp/${v}/`))\n    const [opened, setOpened] = useState<boolean>(false); // sheet stil opened\n    const [started, setStarted] = useState<boolean>(false); // quagga stil inited ?\n    const nowDetecting = useRef<string|null>(null)\n    const addURL = useCallback((code:string)=>{\n        if (nowDetecting.current!==null) return\n        if ( code.length!==10 && code.length!==13 ) return\n        const newcode = code.length===10?code:code.slice(3)\n        if ( urls.filter(url=>url.match(newcode)).length ) return\n        nowDetecting.current = newcode\n        setTimeout(()=>(nowDetecting.current = null), 2000)\n        setUrls(pre=>[...pre, `amazon.com/dp/${newcode}`])\n        console.log('Index add newcode', newcode);\n    }, [urls])\n    const addBook = useCallback((url:string)=>setBooks(pre=>[...pre, url]),[])\n    console.log(`Index Render ${opened?'':'no '}opened ${started?'':'no '} started`);\n    return (\n        <Fragment>\n            <Button\n                onOpen ={()=>!opened&&setOpened(true)  }//,setStarted(false))}\n                onClose={()=> opened&&setOpened(false) }//,setStarted(false))}\n                height ={window.innerHeight*0.96} limit={200} opened={opened} started={started}/>\n            <Sheet\n                onOpen ={()=>!opened&&(setOpened(true), setBook(''), setUrls([]))}\n                onClose={()=> opened&&setOpened(false) }\n                height ={window.innerHeight*0.96} started={started}>\n                {opened &&\n                    <Scanner\n                        onStarted ={setStarted}\n                        onDetected={addURL}/>\n                }\n                {(opened && started)&&\n                    <Slider width={window.innerWidth/4} visible={6} style={{height:\"40%\",bottom:\"15%\",left:0,}}>\n                    {urls.map((url,i)=>\n                        <Book key={i} url={url}\n                            onOpen={()=>opened&&(setOpened(false),addBook(url))}/>\n                    )}\n                    </Slider>\n                }\n            </Sheet>\n            <Slider width={window.innerWidth/3} visible={5} style={{height:\"50%\",top:0,left:0,}}>\n                {books.map((url,i)=>\n                    <Book key={i} url={url} onOpen={()=>setBook(url)}/>\n                )}\n            </Slider>\n            {/*debug*/}\n            <div style={{position:\"fixed\",width:\"auto\",height:\"50%\",bottom:0,left:0,fontSize:\"2em\"}}>\n                <span style={{color:\"white\"}}>\n                    {book && <Book url={book} onOpen={()=>setBook('')}/>}\n                </span>\n            </div>\n        </Fragment>\n    )\n}\n\nReactDOM.render(<App />, document.getElementById('root'))\nunregister();\n"],"sourceRoot":""}